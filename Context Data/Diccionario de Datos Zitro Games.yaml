## ZitroGames · Knowledge-Base · YAML v1.0
bdc_version: "v1.0"
last_full_refresh: "2024-01-15"
contact_owner: "zhaid.martinez@codster.com"

DataDictionary:
  - id: "modelo_zitrogames"
    schema: "generic_lake"
    description: "Modelo de datos de ZitroGames para análisis de operación de máquinas de casino"
    tables:

    #Tabla Principal de Operaciones Gaming
      - id: "zitro_games_data"
        description: "Registro histórico de operación diaria de máquinas de juego (slots y bingo) de Zitro Games en distintos casinos. Incluye datos operativos, financieros y de uso para análisis de rentabilidad, ocupación y rendimiento"
        columns:
          - { name: "casino", type: "varchar", length: 120, description: "Nombre del Casino" }
          - { name: "ciudad", type: "varchar", length: 60, description: "Lugar Geográfico Ciudad" }
          - { name: "estado", type: "varchar", length: 60, description: "Lugar Geográfico Estado" }
          - { name: "fecha", type: "date", description: "Fecha de datos" }
          - { name: "year", type: "int", description: "Año extraído del campo fecha (partición Athena)" }
          - { name: "month", type: "int", description: "Mes extraído del campo fecha (partición Athena)" }
          - { name: "juego", type: "varchar", length: 120, description: "Nombre del juego instalado en la máquina" }
          - { name: "kam", type: "varchar", length: 80, description: "Nombre del Key Account Manager" }
          - { name: "licencia", type: "varchar", description: "Identificador unico de máquina" }
          - { name: "mueble", type: "varchar", length: 50, description: "Es el tipo de gabinete de la máquina" }
          - { name: "operador", type: "varchar", length: 100, description: "Empresa Operador del Casino" }
          - { name: "region_comercial", type: "varchar", length: 60, description: "Lugar Geográfico Región" }
          - { name: "tipo_maquina", type: "varchar", length: 20, description: "Si es video bingo o video slots" }
          - { name: "tipo_operacion", type: "varchar", length: 40, description: "Propiedad de la máquina" }
          - { name: "coin_in", type: "decimal(12,2)", description: "Dinero apostado" }
          - { name: "coin_out", type: "decimal(12,2)", description: "Dinero pagado de premios" }
          - { name: "maquinas_dia", type: "bigint", description: "Contador de apoyo para formular kpis" }
          - { name: "partidas", type: "bigint", description: "Cantidad de jugadas" }

        primary_key: ["licencia", "fecha"]
        
        # KPIs Calculados
        calculated_metrics:
          - { name: "coin_in_pud", key_name: "Coin In PUD", formula: "suma(coin_in) / suma(maquinas_dia)", description: "Promedio de Apuesta Diaria por Máquina" }
          - { name: "win_pud", key_name: "Win PUD", formula: "suma(coin_in - coin_out) / suma(maquinas_dia)", description: "Promedio de Ganancia diaria por máquina" }
          - { name: "rtp", key_name: "RTP", formula: "suma(coin_out) / suma(coin_in) * 100", description: "Porcentaje de pagos con respecto a lo Apostado" }
          - { name: "ocup_pud", key_name: "Ocup PUD", formula: "suma(_ocupacion_en_segundos) / suma(maquinas_dia)", description: "Promedio de tiempo de ocupación Diaria por Máquina (HH:MM)" }
          - { name: "bet_x_game", key_name: "Bet x Game", formula: "suma(coin_in) / suma(partidas)", description: "Apuesta por Partida" }
          - { name: "games_pud", key_name: "Games PUD", formula: "suma(partidas) / suma(maquinas_dia)", description: "Promedio de Partidas Diaria por Máquina" }
          - { name: "n_mach", key_name: "N Mach", formula: "contar_distinto(licencia)", description: "Cantidad de Máquinas" }

        business_rules:
          - "Cada registro representa la operación diaria de una máquina específica"
          - "coin_in siempre debe ser >= 0"
          - "coin_out siempre debe ser >= 0"
          - "RTP típico oscila entre 85% y 95%"
          - "maquinas_dia siempre es 1 para registros válidos"
          - "licencia es el identificador único por máquina"
          - "kam (Key Account Manager) gestiona la relación comercial"
          - "year y month son particiones de Athena para optimizar consultas"
          - "Usar filtros WHERE year=XXXX AND month=XX para mejor performance"

        use_cases:
          - "Análisis de rentabilidad por casino y zona"
          - "Comparación de rendimiento entre juegos"
          - "Optimización de layout del piso del casino"
          - "Identificación de máquinas de alto/bajo rendimiento"
          - "Análisis de ocupación y utilización"
          - "Benchmarking entre casinos y estados"